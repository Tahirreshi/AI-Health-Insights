<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Health Analysis Result</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 min-h-screen text-gray-100">

  <div class="max-w-6xl mx-auto px-6 py-10">
    <a href="/" class="inline-block mb-6 text-sm text-slate-300 hover:underline">← Back to upload</a>

    <header class="flex items-center justify-between mb-6">
      <h1 class="text-3xl font-extrabold text-teal-300">Extracted Lab Report Table</h1>
      <div class="text-sm text-slate-300">Results — styled & organized</div>
    </header>

    <section class="bg-slate-800 rounded-2xl p-6 shadow-xl border border-slate-700">
      {% if table and table|length > 0 %}
        <div class="overflow-x-auto">
          <table class="min-w-full border-collapse">
            <thead>
              <tr class="text-slate-300 text-left">
                <th class="p-3">Parameter</th>
                <th class="p-3">Value</th>
                <th class="p-3">Unit</th>
                <th class="p-3">Reference Range</th>
                <th class="p-3">Flag</th>
              </tr>
            </thead>
            <tbody>
              {% for row in table %}
                {% set param = row[0] %}
                {% set value = row[1] %}
                {% set unit = row[2] %}
                {% set ref = row[3] %}
                {% set flag = row[4] %}
                <tr class="border-t border-slate-700 hover:bg-slate-900">
                  <td class="p-3 align-top font-medium text-slate-200">{{ param }}</td>
                  <td class="p-3 align-top text-slate-100">{{ value }}</td>
                  <td class="p-3 align-top text-slate-300">{{ unit }}</td>
                  <td class="p-3 align-top text-slate-300">{{ ref }}</td>
                  <td class="p-3 align-top">
                    {% if flag %}
                      {% set f = flag|lower %}
                      {% if 'h' in f or 'high' in f or '↑' in f %}
                        <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-red-700 text-red-100 text-sm font-semibold shadow">
                          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><path d="M12 5v14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M5 12h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                          HIGH
                        </span>
                      {% elif 'l' in f or 'low' in f or '↓' in f %}
                        <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-800 text-blue-100 text-sm font-semibold shadow">
                          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><path d="M12 19V5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M5 12h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                          LOW
                        </span>
                      {% else %}
                        <span class="inline-block px-3 py-1 rounded-full bg-slate-700 text-slate-200 text-sm">{{ flag }}</span>
                      {% endif %}
                    {% else %}
                      <span class="text-slate-400 text-sm italic">—</span>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="mt-6 p-4 bg-slate-900 rounded-lg border border-slate-700">
          <h3 class="text-teal-300 font-semibold mb-2">AI Health Advice</h3>
          <p class="text-slate-200 leading-relaxed">{{ advice }}</p>
        </div>

      {% else %}
        <div class="py-12 text-center">
          <h3 class="text-xl font-semibold text-slate-200">No abnormal values detected</h3>
          <p class="mt-3 text-slate-400">If you think there are abnormalities, try uploading a higher-quality image or a PDF report.</p>
        </div>
      {% endif %}
    </section>
  </div>

</body>
</html>
